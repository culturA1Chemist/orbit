@use '../_mixins.scss' as *;
@use '../_variables.scss' as *;
@use '../ui' as *;

/* z-progress */
/* structure */
.z-progress {
  --percentage: calc(var(--progress) * 3.6);
  display: grid;
  border-radius: 50%;
  grid-area: 1/1/1/1;
  place-items: center;
  width: 100%;
  aspect-ratio: 1;
}

.z-progress::after {
  // https://codepen.io/chandrashekhar/pen/RvMVey?editors=1100
}

/* theme */
.z-progress {
  background-image: radial-gradient(circle, var(--light) 64%, transparent 65%),
    conic-gradient(
      var(--primary) calc((var(--percentage) - 1) * 1deg),
      var(--secondary) calc(var(--percentage) * 1deg)
    );
}

/* z-svg */
/* structure */
.z-svg {
  display: grid;
  border-radius: inherit;
  grid-area: 1/1/1/1;
  @include alignment;
  rotate: -90deg;
  width: calc(var(--diam));
  height: calc(var(--diam));
}

.z-svg > .markers {
  --markers: 12;
  --marker-width: 1px;
  --circumference: calc(var(--r) * var(--π) * 2);
  --dash: calc(var(--circumference) / var(--markers) - var(--marker-width));
  --r: calc(var(--diam) / 2);
  cx: var(--r);
  cy: var(--r);
  r: var(--r);
  stroke-width: calc(var(--radius) * 2);
  stroke-dasharray: var(--marker-width) var(--dash);
}
.z-svg > .svg-progress {
  --r: calc(var(--diam) / 2);
  cx: var(--r);
  cy: var(--r);
  r: calc(var(--r));
  stroke-width: var(--stroke);
  stroke-dasharray: calc(var(--r) * var(--π) * 2);
  stroke-dashoffset: calc((100 - var(--val)) / 100 * (var(--r) * var(--π) * 2));
}

// https://codepen.io/arrayzero/pen/LbvJvW

/* theme */
.z-svg > .markers {
  fill: none;
  stroke: #9119e069;
}
.z-svg > .svg-progress {
  fill: none;
}

